% !TeX spellcheck = it_IT
\documentclass[a4paper]{report}

\usepackage[a4paper, margin=2.5cm]{geometry}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[italian]{babel}
\usepackage{fancyhdr}
\usepackage{xcolor}
\usepackage{tocloft}

\newlength{\originalsecnumwidth}
\setlength{\originalsecnumwidth}{\cftsecnumwidth}

\usepackage{tocloft}

\newlength{\originalsubsecnumwidth}
\setlength{\originalsubsecnumwidth}{\cftsubsecnumwidth}


\newcounter{rfstart}
\newenvironment{rfscope}{
    \setcounter{rfstart}{\value{section}}
    \renewcommand{\thesubsection}{\textbf{RF\the\numexpr\value{section}-\value{rfstart}\relax.\arabic{subsection}}}
    \renewcommand{\thesubsubsection}{\textbf{\thesubsection.\arabic{subsubsection}}}
      \addtocontents{toc}{\protect\setlength{\cftsubsecnumwidth}{3.9em}}
}{
  \addtocontents{toc}{\protect\setlength{\cftsecnumwidth}{\originalsecnumwidth}}
}

\newenvironment{rnfscope}{
    \setcounter{section}{0}    
    \renewcommand{\thesection}{\textbf{RNF\arabic{section}}}
    \addtocontents{toc}{\protect\setlength{\cftsecnumwidth}{4em}}
}{
    \addtocontents{toc}{\protect\setlength{\cftsecnumwidth}{\originalsecnumwidth}}
}

\newcounter{ucstart}
\newlength{\originalucsubsecwidth}
\setlength{\originalucsubsecwidth}{\cftsubsecnumwidth}
\newenvironment{ucscope}{
    \setcounter{ucstart}{\value{section}}
    \renewcommand{\thesubsection}{\textbf{UC\the\numexpr\value{section}-\value{ucstart}\relax.\arabic{subsection}}}
    \renewcommand{\thesubsubsection}{\textbf{\thesubsection.\arabic{subsubsection}}}
    \addtocontents{toc}{\protect\setlength{\cftsubsecnumwidth}{3.5em}}
}{
    \addtocontents{toc}{\protect\setlength{\cftsubsecnumwidth}{\originalucsubsecwidth}}
}

\newenvironment{usscope}{
    \setcounter{section}{0}    
    \renewcommand{\thesection}{\textbf{US\arabic{section}}}
    \addtocontents{toc}{\protect\setlength{\cftsecnumwidth}{4em}}
}{
    \addtocontents{toc}{\protect\setlength{\cftsecnumwidth}{\originalsecnumwidth}}
}

\definecolor{trentogreen}{RGB}{0, 122, 82}
\definecolor{grayline}{RGB}{200, 200, 200}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  citecolor=blue,
  urlcolor=blue
}
\pagestyle{fancy}
\fancyhf{}
\rhead{Documento di Analisi dei Requisiti}
\lhead{Trento Decide}
\cfoot{\thepage}

\usepackage{graphicx}

\newcommand{\defref}[1]{(def.~\ref{#1})}

\newcounter{definition}
\renewcommand{\thedefinition}{\arabic{definition}}

\newcounter{rfsection}
\setcounter{rfsection}{1}

\newcounter{ucsection}
\setcounter{ucsection}{1}

\renewcommand{\bibname}{Bibliografia e Sitografia}

\usepackage{etoc}

\begin{document}

\begin{titlepage}
  \centering

  {\Huge \bfseries Documento di Analisi dei Requisiti }\\[1.5em]
  \Large \emph{Progetto Trento Decide}\\[1em]
  \Large {Corso di Ingegneria del Software \\
Università di Trento}\\[1em]

  {\large Versione 2.3 }
  \vspace{0.5cm}

  {\large \today \par}
  \vspace{3.5cm}

  \includegraphics[width=0.33 \textwidth]{img/unitn.png}

\vfill

\begin{flushright}
  \textbf{Autori}\\[0.4em]
  Youssef Bouadoud (255343)\\
  Alessandro Duranti (251835)\\
  Tommaso Tricker (252029)
\end{flushright}

\vspace{1cm}

\hrule
\vspace{0.3em}
{\small
Dipartimento di Ingegneria e Scienza dell'Informazione
Università di Trento
}

\end{titlepage}

\tableofcontents
\newpage

\etocsettocstyle{}{}

\include{chapters/ch1}
\include{chapters/ch2}
\include{chapters/ch3}
\include{chapters/ch4}
\include{chapters/ch5}
\include{chapters/ch6}
\include{chapters/ch7}

\end{document}
