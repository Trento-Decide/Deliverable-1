% !TeX spellcheck = it_IT
\chapter{User Stories}

\newcommand{\userstory}[3]{
  #1

  \begin{description}
    \item[Criteri di accettazione:]~
    \begin{itemize}
      #2
    \end{itemize}

    \item[Tasks:]~
    \begin{itemize}
      #3
    \end{itemize}
  \end{description}
}

\begin{usscope}

\section{Registrazione del cittadino~\ref{rf:registrazionecittadini}} \label{us:registrazione}
\userstory
{
  Come utente anonimo, voglio registrarmi alla piattaforma verificando l'identità tramite SPID o CIE e impostando poi le credenziali locali.
}
{
  \item Il sistema deve richiedere l'autenticazione iniziale tramite SPID o CIE.

  \item Il sistema deve verificare automaticamente la residenza nel Comune di Trento tramite ANPR, bloccando la registrazione altrimenti.

  \item L'utente deve poter inserire email e password per i futuri accessi.

  \item L'utente deve poter selezionare la preferenza per la ricezione delle notifiche email.

  \item Il sistema deve inviare una email di verifica contenente un link per l'attivazione dell'account.

  \item L'attivazione dell'account deve essere completata entro 10 minuti dell'invio della mail, pena invalidazione della richiesta.
}
{
  \item Integrazione dei servizi di autenticazione SPID e CIE.

  \item Collegamento con ANPR per la verifica della residenza.

  \item Configurazione del servizio di SMTP per l'invio delle email.

  \item Sviluppo del modulo per l'inserimento di email, password, username e preferenza notifiche.

  \item Implementazione della logica fa scadere il token di verifica dopo 10 minuti.

  \item Implementazione dei controlli di unicità per email e username nel database.
}

\section{Espressione del voto~\ref{rf:voto}} \label{us:voto}
\userstory
{
  Come cittadino, desidero poter esprimere un voto favorevole o contrario sulle proposte e i sondaggi.
}
{
  \item Il sistema deve permettere di esprimere un voto positivo o negativo esclusivamente sulle proposte in stato ``pubblicata''.

  \item Il voto deve poter essere modificato dall'utente fino alla chiusura del sondaggio.

  \item Ogni utente può esprimere un solo voto per ciascuna proposta o per ciascun sondaggio.

  \item Il sistema deve registrare il voto in forma anonima.
}
{
  \item Aggiornamento in real-time dei contatori visibili sulla proposta.

  \item Implementazione componenti UI.

  \item Implementazione logica per la modifica del voto.

  \item Sviluppo API backend per la ricezione e validazione del voto, controllando prima lo stato della proposta.

  \item Progettazione dello schema database che associa il voto dell'utente  all'elemento, garantendo l'unicità e anonimità del voto.
}

\section{Gestione dei preferiti~\ref{rf:preferiti}} \label{us:preferiti}
\userstory
{
  Come cittadino, voglio poter aggiungere o rimuovere proposte e sondaggi dai preferiti, per poter accedere facilmente ai contenuti di mio interesse e ricevere notifiche automatiche sugli aggiornamenti.
}
{
  \item Il sistema deve consentire l'aggiunta e rimozione di un elemento dai preferiti con un simbolo che ne denota chiaramente lo stato.

  \item L'azione di aggiunta/rimozione deve essere disponibile sia nella lista generale delle proposte/sondaggi che nella pagina del singolo elemento.

  \item Il sistema deve fornire una sezione "Preferiti" dove l'utente può consultarli.

  \item Se un elemento nei preferiti non è più disponibile, esso deve essere automaticamente rimosso dalla lista.

  \item L'aggiornamento dello stato "preferito" deve essere immediato e persistente tra le sessioni.
}
{
  \item Implementazione del componente UI sulle card e nelle pagine di dettaglio.

  \item Sviluppo della pagina della lista dei preferiti.

  \item Implementazione della logica di pulizia dei preferiti in caso di cancellazione dell'elemento.
}

\section{Segnalazione contenuti~\ref{rf:segnalazione}} \label{us:segnalazione}
\userstory
{
  Come cittadino, voglio poter segnalare proposte o modifiche che ritengo inappropriati specificandone la motivazione, affinché i moderatori possano verificarli ed eventualmente prendere provvedimenti.
}
{
  \item Il sistema deve mostrare un opzione "Segnala contenuto" su ogni proposta o modifica pubblica di terzi.

  \item Il sistema deve aprire un modulo che consente la selezione di una motivazione dalla lista predefinita e che contiene un campo di testo facoltativo per descrivere il motivo della segnalazione.

  \item Il sistema deve verificare che il contenuto segnalato sia ancora disponibile prima di registrare l'operazione.

  \item Una volta confermata, la segnalazione deve essere inserita automaticamente nella coda di revisione dei moderatori.

  \item L'utente deve ricevere un feedback visivo di conferma dell'avvenuto invio della segnalazione.
}
{
  \item Implementazione del bottone "Segnala" nell'interfaccia delle proposte.

  \item Creazione del modulo con la lista predefinita di motivazioni e campo di testo.

  \item Sviluppo API per la creazione dell'oggetto Segnalazione collegato a Utente e Contenuto.

  \item Implementazione della logica di inserimento nella coda di revisione.

  \item Gestione degli errori nel caso in cui il contenuto sia stato rimosso durante la segnalazione.
}

\section{Espressione Endorsement~\ref{rf:endorsement}} \label{us:endorsement}
\userstory
{
  Come rappresentante di un'associazione, voglio poter esprimere o rimuovere un endorsement ufficiale sulle proposte pubblicate, per manifestare pubblicamente il sostegno della mia organizzazione accrescendone la rilevanza agli occhi della cittadinanza.
}
{
  \item Il sistema deve consentire alle sole utenze di tipo "Associazione" di esprimere un endorsement sulle proposte in stato "pubblicata".
  \item Ogni associazione può esprimere un solo endorsement per ciascuna proposta.
  \item L'azione di endorsement deve generare visibilmente un'etichetta sulla proposta riportante il nome dell'associazione.
  \item L'associazione deve poter rimuovere un endorsement precedentemente assegnato; la rimozione deve comportare la cancellazione immediata dell'etichetta visuale.
}
{
  \item Implementazione verifica permessi (solo ruolo Associazione).
  \item Sviluppo API backend per gestione endorsement.
  \item Aggiornamento modello dati Proposta per collegare la lista degli endorser.
  \item Sviluppo componente UI "Etichetta Endorsement" nella visualizzazione proposta.
  \item Implementazione pulsante toggle "Esprimi/Rimuovi Endorsement".
}

\section{Ordinamento proposte~\ref{rf:ordinamentoproposte}} \label{us:ordinamento}
\userstory{
  Come utente, voglio poter ordinare le proposte che visualizzo in base a data o numero di voti, così da poter analizzare più facilmente quelle rilevanti per me.
}
{
  \item Il sistema deve consentire l’ordinamento per data di pubblicazione.
  \item Il sistema deve consentire l’ordinamento per numero totale di voti.
  \item L’utente deve poter invertire l’ordine (crescente/decrescente).
  \item L’ordinamento deve essere applicato immediatamente all’elenco visibile.
}
{
  \item Implementazione UI dei controlli di ordinamento (dropdown o pulsanti).
  \item API backend per applicare criteri di ordinamento.
  \item Aggiornamento del componente elenco proposte.
}

\section{Rimozione contenuti~\ref{rf:rimozionecontenuti}} \label{us:rimozione}
\userstory{
  Come moderatore, voglio poter eliminare i contenuti che non rispettano le regole della piattaforma, così da preservare un ambiente sicuro e rispettoso.
}
{
  \item Il sistema deve permettere ai moderatori di rimuovere contenuti non conformi.
  \item La rimozione deve richiedere la selezione di una motivazione.
  \item Il contenuto eliminato non deve più essere visibile al pubblico.
  \item La rimozione deve essere registrata con motivazione, data e moderatore responsabile.
}
{
  \item Interfaccia “Rimuovi contenuto” visibile esclusivamente ai moderatori.
  \item API backend per l’eliminazione del contenuto.
  \item Aggiornamento del database con registrazione dell’azione di moderazione.
  \item Aggiornamento dell’elenco dei contenuti pubblici.
}

\section{Applicazione limitazioni utenti~\ref{rf:moderazioneutenti}} \label{us:limitazione}
\userstory
{
  Come moderatore, voglio applicare limitazioni temporanee agli account che violano le linee guida, così da prevenire comportamenti scorretti e tutelare la comunità.
}
{
  \item Il sistema deve consentire ai moderatori di applicare limitazioni temporanee ai cittadini.
  \item Per le associazioni, il sistema deve inoltrare la richiesta all’amministrazione.
  \item Ogni limitazione deve generare l'invio di un’email all’utente con motivazione e durata.
  \item Un account limitato deve essere bloccato nelle azioni previste dalla limitazione.
}
{
  \item Interfaccia per la gestione delle limitazioni accessibile ai moderatori.
  \item API per applicare la limitazione o inviare la richiesta all’amministrazione.
  \item Sistema di notifica email per informare gli utenti coinvolti.
  \item Applicazione di limitazioni dei permessi (azioni bloccate).
}

\section{Pubblicazione sondaggi~\ref{rf:sondaggi}} \label{us:sondaggi}
\userstory
{
  Come amministratore, voglio poter pubblicare sondaggi, così da raccogliere in modo strutturato l’opinione dei cittadini su temi di interesse pubblico.
}
{
  \item Il sistema deve permettere la creazione di un sondaggio con titolo, descrizione, categoria, periodo di validità e quesiti.
  \item La pubblicazione deve avvenire immediatamente dopo la conferma dell’amministratore.
  \item Gli utenti che hanno attivato le notifiche devono essere avvisati della pubblicazione.
  \item Il sondaggio deve chiudersi automaticamente alla data prevista.
}
{
  \item Modulo UI dedicato alla creazione dei sondaggi.
  \item API backend per creazione e pubblicazione del sondaggio.
  \item Configurazione CRON/worker per chiusura automatica.
  \item Invio delle notifiche email agli utenti interessati.
}

\section{Scaricare report~\ref{rf:report}} \label{us:report}
\userstory
{
  Come amministratore, voglio poter scaricare report sull’attività della piattaforma, così da analizzare l’andamento del sistema e supportare le decisioni strategiche.
}
{
  \item Il sistema deve consentire il download dei report nei formati previsti, ad esempio CSV.
  \item Il sistema deve generare report aggregati e anonimizzati.
  \item Il sistema deve offrire almeno due tipi di report:
  \begin{itemize}
    \item attività per proposta;
    \item attività complessiva.
  \end{itemize}
  \item Il download deve avvenire in locale senza esposizione di dati sensibili.
}
{
\item Interfaccia per la selezione del tipo di report.
\item API backend per la generazione del report.
\item Modulo di esportazione nel formato richiesto.
}

\end{usscope}