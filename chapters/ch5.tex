% !TeX spellcheck = it_IT
\chapter{User Stories}

\newcommand{\userstory}[3]{
  #1

  \begin{description}
    \item[Criteri di accettazione:]~
    \begin{itemize}
      #2
    \end{itemize}

    \item[Tasks:]~
    \begin{itemize}
      #3
    \end{itemize}
  \end{description}
}


\section{Introduzione}
Le User Stories descrivono il comportamento del sistema dal punto di vista degli utenti finali, evidenziando bisogni, obiettivi e valore atteso.
Ogni storia segue una struttura uniforme e include criteri di accettazione verificabili e i task principali necessari alla sua implementazione.

\begin{usscope}

\section{Registrazione del cittadino~\ref{rf:registrazionecittadini}}
\userstory
{
  Come utente anonimo, voglio registrarmi alla piattaforma verificando la mia identità tramite SPID o CIE e configurando le mie credenziali locali.
}
{
  \item Il sistema deve richiedere l'autenticazione iniziale tramite SPID o CIE.
  \item Il sistema deve verificare automaticamente la residenza nel Comune di Trento tramite ANPR; se l'utente non è residente, la registrazione deve essere bloccata.
  \item L'utente deve poter inserire un indirizzo email, una password e un nome utente per i futuri accessi.
  \item L'utente deve poter selezionare la preferenza per la ricezione delle notifiche email (abilita/disabilita).
  \item Il sistema deve inviare una email di verifica contenente un link per l'attivazione dell'account.
  \item L'attivazione dell'account deve essere completata entro 10 minuti dalla ricezione dell'email, pena l'invalidazione della richiesta.
}
{
  \item Integrazione dei servizi di autenticazione SPID e CIE.
  \item Implementazione del connettore ANPR per la verifica della residenza.
  \item Sviluppo del modulo frontend per l'inserimento di email, password, username e preferenze notifiche.
  \item Implementazione controlli di unicità per email e username nel database.
  \item Configurazione del servizio SMTP per l'invio delle email transazionali.
  \item Implementazione della logica di scadenza del token di verifica (10 minuti).
}

\section{Espressione del voto~\ref{rf:voto}} \label{us:voto}
\userstory
{
  Come utente, voglio esprimere un voto (favorevole o contrario) sulle proposte e partecipare ai sondaggi attivi, per contribuire alla definizione delle priorità comunali.
}
{
  \item Il sistema deve consentire di esprimere un voto positivo o negativo sulle proposte in stato "pubblicata" o "in valutazione".
  \item Il sistema deve consentire di rispondere ai quesiti presenti nei sondaggi attivi.
  \item Ogni utente può esprimere un solo voto per ciascuna proposta o per ciascun quesito dei sondaggi.
  \item Il voto deve poter essere modificato dall'utente fino alla chiusura del sondaggio o alla definizione dell'esito della proposta.
  \item Il sistema deve registrare il voto in forma anonima, rendendo impossibile risalire all'identità del votante tramite i report pubblici.
  \item Il sistema deve aggiornare il conteggio dei voti e visualizzare l'eventuale feedback all'utente.
}
{
  \item Implementazione componenti UI per la votazione (bottoni favorevole/contrario e opzioni sondaggio).
  \item Sviluppo API backend per la ricezione e validazione del voto (controllo stato proposta).
  \item Progettazione dello schema database per garantire l'unicità del voto per utente mantenendo l'anonimato (separazione identità/preferenza).
  \item Implementazione logica per la modifica del voto.
  \item Aggiornamento real-time dei contatori visibili sulla proposta.
}

\section{Gestione dei preferiti~\ref{rf:preferiti}} \label{us:preferiti}
\userstory
{
  Come utente, voglio aggiungere o rimuovere proposte e sondaggi dai miei preferiti, per poter accedere rapidamente ai contenuti di mio interesse e ricevere notifiche automatiche sui loro aggiornamenti di stato.
}
{
  \item Il sistema deve consentire di aggiungere o rimuovere una proposta o un sondaggio dai preferiti agendo su un apposito indicatore visivo.
  \item L'azione di aggiunta/rimozione deve essere disponibile sia dalla lista generale delle proposte/sondaggi che dalla pagina di dettaglio del singolo elemento.
  \item Il sistema deve fornire una sezione dedicata "Preferiti" dove l'utente può consultare l'elenco aggiornato di tutti gli elementi salvati.
  \item Se un elemento nei preferiti viene rimosso o archiviato dal sistema, esso deve essere automaticamente rimosso dalla lista dei preferiti dell'utente, eventualmente con una notifica informativa.
  \item L'aggiornamento dello stato "preferito" deve essere immediato e persistente tra le sessioni.
}
{
  \item Implementazione del componente UI (attivo/disattivo) sulle card e nelle pagine di dettaglio.
  \item Sviluppo API backend per il toggle dello stato di preferito (add/remove).
  \item Sviluppo della pagina frontend "I miei Preferiti".
  \item Implementazione della logica di pulizia dei preferiti in caso di cancellazione della proposta originale.
}

\section{Segnalazione contenuti~\ref{rf:segnalazione}} \label{us:segnalazione}
\userstory
{
  Come utente, voglio poter segnalare i contenuti pubblicati (proposte o modifiche) ritenuti inappropriati specificandone la motivazione, affinché i moderatori possano verificarli e garantire un ambiente di discussione sicuro e rispettoso.
}
{
  \item Il sistema deve mostrare un comando "Segnala contenuto" su ogni proposta o modifica pubblicata.
  \item Il sistema deve presentare un modulo che richiede obbligatoriamente la selezione di una motivazione da un elenco predefinito (es. incitamento all'odio, informazioni false, spam, violazione privacy).
  \item L'utente deve poter inserire facoltativamente un testo descrittivo aggiuntivo per chiarire il motivo della segnalazione.
  \item Il sistema deve verificare che il contenuto segnalato sia ancora disponibile prima di registrare l'operazione.
  \item Una volta confermata, la segnalazione deve essere inserita automaticamente nella coda di revisione dei moderatori.
  \item L'utente deve ricevere un feedback visivo di conferma dell'avvenuto invio della segnalazione.
}
{
  \item Implementazione del bottone "Segnala" nell'interfaccia delle proposte.
  \item Creazione della modale con form contenente la lista predefinita di motivazioni (enum) e campo testo libero.
  \item Sviluppo API backend per la creazione dell'oggetto "Report" collegato a User e Content.
  \item Implementazione della logica di inserimento nella coda di revisione.
  \item Gestione degli errori nel caso in cui il contenuto sia stato rimosso concorrentemente.
}

\section{Espressione Endorsement~\ref{rf:endorsement}}
\userstory
{
  Come rappresentante di un'associazione, voglio poter esprimere o rimuovere un endorsement ufficiale sulle proposte pubblicate, per manifestare pubblicamente il sostegno della mia organizzazione accrescendone la rilevanza agli occhi della cittadinanza.
}
{
  \item Il sistema deve consentire alle sole utenze di tipo "Associazione" di esprimere un endorsement sulle proposte in stato "pubblicata".
  \item Ogni associazione può esprimere un solo endorsement per ciascuna proposta.
  \item L'azione di endorsement deve generare visibilmente un'etichetta sulla proposta riportante il nome dell'associazione.
  \item L'associazione deve poter rimuovere un endorsement precedentemente assegnato; la rimozione deve comportare la cancellazione immediata dell'etichetta visuale.
}
{
  \item Implementazione verifica permessi (solo ruolo Associazione).
  \item Sviluppo API backend per gestione endorsement.
  \item Aggiornamento modello dati Proposta per collegare la lista degli endorser.
  \item Sviluppo componente UI "Etichetta Endorsement" nella visualizzazione proposta.
  \item Implementazione pulsante toggle "Esprimi/Rimuovi Endorsement".
}

\section{Ordinamento proposte~\ref{rf:ordinamentoproposte}}
\userstory{
  Come utente, voglio poter ordinare le proposte che visualizzo in base a data o numero di voti, così da poter analizzare più facilmente quelle rilevanti per me.
}
{
  \item Il sistema deve consentire l’ordinamento per data di pubblicazione.
  \item Il sistema deve consentire l’ordinamento per numero totale di voti.
  \item L’utente deve poter invertire l’ordine (crescente/decrescente).
  \item L’ordinamento deve essere applicato immediatamente all’elenco visibile.
}
{
  \item Implementazione UI dei controlli di ordinamento (dropdown o pulsanti).
  \item API backend per applicare criteri di ordinamento.
  \item Aggiornamento del componente elenco proposte.
}

\section{Rimozione contenuti~\ref{rf:rimozionecontenuti}}
\userstory{
  Come moderatore, voglio poter eliminare i contenuti che non rispettano le regole della piattaforma, così da preservare un ambiente sicuro e rispettoso.
}
{
  \item Il sistema deve permettere ai moderatori di rimuovere contenuti non conformi.
  \item La rimozione deve richiedere la selezione di una motivazione.
  \item Il contenuto eliminato non deve più essere visibile al pubblico.
  \item La rimozione deve essere registrata con motivazione, data e moderatore responsabile.
}
{
  \item Interfaccia “Rimuovi contenuto” visibile esclusivamente ai moderatori.
  \item API backend per l’eliminazione del contenuto.
  \item Aggiornamento del database con registrazione dell’azione di moderazione.
  \item Aggiornamento dell’elenco dei contenuti pubblici.
}

\section{Applicazione limitazioni utenti~\ref{rf:moderazioneutenti}}
\userstory
{
  Come moderatore, voglio applicare limitazioni temporanee agli account che violano le linee guida, così da prevenire comportamenti scorretti e tutelare la comunità.
}
{
  \item Il sistema deve consentire ai moderatori di applicare limitazioni temporanee ai cittadini.
  \item Per le associazioni, il sistema deve inoltrare la richiesta all’amministrazione.
  \item Ogni limitazione deve generare l'invio di un’email all’utente con motivazione e durata.
  \item Un account limitato deve essere bloccato nelle azioni previste dalla limitazione.
}
{
  \item Interfaccia per la gestione delle limitazioni accessibile ai moderatori.
  \item API per applicare la limitazione o inviare la richiesta all’amministrazione.
  \item Sistema di notifica email per informare gli utenti coinvolti.
  \item Applicazione di limitazioni dei permessi (azioni bloccate).
}

\section{Pubblicazione sondaggi~\ref{rf:sondaggi}}
\userstory
{
  Come amministratore, voglio poter pubblicare sondaggi, così da raccogliere in modo strutturato l’opinione dei cittadini su temi di interesse pubblico.
}
{
  \item Il sistema deve permettere la creazione di un sondaggio con titolo, descrizione, categoria, periodo di validità e quesiti.
  \item La pubblicazione deve avvenire immediatamente dopo la conferma dell’amministratore.
  \item Gli utenti che hanno attivato le notifiche devono essere avvisati della pubblicazione.
  \item Il sondaggio deve chiudersi automaticamente alla data prevista.
}
{
  \item Modulo UI dedicato alla creazione dei sondaggi.
  \item API backend per creazione e pubblicazione del sondaggio.
  \item Configurazione CRON/worker per chiusura automatica.
  \item Invio delle notifiche email agli utenti interessati.
}

\section{Scaricare report~\ref{rf:report}}
\userstory
{
  Come amministratore, voglio poter scaricare report sull’attività della piattaforma, così da analizzare l’andamento del sistema e supportare le decisioni strategiche.
}
{
  \item Il sistema deve consentire il download dei report nei formati previsti, ad esempio CSV.
  \item Il sistema deve generare report aggregati e anonimizzati.
  \item Il sistema deve offrire almeno due tipi di report:
  \begin{itemize}
    \item attività per proposta;
    \item attività complessiva.
  \end{itemize}
  \item Il download deve avvenire in locale senza esposizione di dati sensibili.
}
{
\item Interfaccia per la selezione del tipo di report.
\item API backend per la generazione del report.
\item Modulo di esportazione nel formato richiesto.
}

\end{usscope}