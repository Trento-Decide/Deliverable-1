\chapter{Use Case Diagram}

\renewcommand{\thesubsection}{UC\arabic{subsection}}
\setlength{\parskip}{0.4em}
\setlength{\parindent}{0pt}

\section*{Introduzione}
In questa sezione vengono presentati gli Use Case Diagram del sistema Trento Decide.
Essi rappresentano, in forma grafica, le interazioni tra gli attori e la piattaforma, illustrando le principali funzionalità e relazioni di inclusione o estensione tra i casi d’uso.
Questi diagrammi consentono di visualizzare in modo sintetico come i requisiti funzionali (RF) si traducono in comportamenti concreti del sistema, offrendo una visione d’insieme delle dinamiche operative e dei ruoli coinvolti.

\section{Utente Anonimo}
\localtableofcontentswithrelativedepth{+1}

\begin{center}
	\includegraphics[scale=1.0]{img/usecase/utenteanonimo.png}
\end{center}

\subsection{Login \ref{RF:login}}

\textbf{Riassunto:}
Questo use case descrive come un utente anonimo accede alla piattaforma tramite credenziali locali oppure tramite SPID o CIE.

\textbf{Precondizioni:}
L’utente non è autenticato.

\textbf{Postcondizioni:}
L’utente risulta autenticato e accede alla piattaforma.

\textbf{Descrizione:}
\begin{enumerate}
    \item L’utente visualizza la schermata di login.
    \item L’utente può scegliere una delle seguenti modalità:
    \begin{enumerate}
        \item \textbf{Credenziali locali:} inserisce email e password nei campi dedicati e conferma l’accesso.
        \item \textbf{SPID/CIE:} seleziona l’opzione SPID o CIE; il sistema reindirizza al relativo servizio di autenticazione.
    \end{enumerate}
    \item Se l’autenticazione è valida, l'utente accede al sistema \textbf{[eccezione 1][eccezione 2]}.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
    \item[(1)] Se email o password non sono valide, il sistema mostra un messaggio di errore e richiede di reinserire i dati.
    \item[(2)] Se l’autenticazione SPID/CIE fallisce, viene annullata o scade, il sistema mostra un messaggio di errore e ritorna alla schermata di login.
\end{itemize}

\subsection{Registrazione del cittadino \ref{RF:registrazionecittadino}}

\textbf{Riassunto:}
Questo use case descrive come un utente anonimo registra un nuovo account cittadino tramite SPID o CIE e definisce le proprie credenziali locali.

\textbf{Precondizioni:}
L’utente non possiede ancora un account sulla piattaforma.

\textbf{Postcondizioni:}
Un nuovo account cittadino è creato e attivo; le credenziali locali risultano configurate.

\textbf{Descrizione:}
\begin{enumerate}
    \item L’utente accede alla schermata di registrazione.
    \item L’utente seleziona una modalità di identificazione:
    \begin{enumerate}
        \item \textbf{SPID} — reindirizzamento al provider SPID;
        \item \textbf{CIE} — reindirizzamento al servizio di autenticazione tramite CIE.
    \end{enumerate}
    \item Una volta validata l’identità tramite SPID/CIE \textbf{[eccezione 1]}, il sistema richiede:
    \begin{enumerate}
    	\item L'indirizzo di residenza dell'utente tramite ANPR
    \end{enumerate}
    \begin{enumerate}
        \item inserimento dell’email;
        \item definizione della password;
        \item scelta del nome utente.
        \item \textit{facoltativamente} ricezione delle modifiche via email.
    \end{enumerate}
    \item L’utente conferma i dati inseriti.
    \item Il sistema crea l’account e invia un’email di conferma all’indirizzo fornito \textbf{[eccezione 2]}.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
	\item[(1)] Se l’autenticazione SPID/CIE fallisce o viene annullata, la registrazione non procede.
    	\item[(2)] Se l’email non è valida o già associata a un altro account, il sistema notifica l’errore e richiede la correzione del dato.
\end{itemize}

\section{Utente Autenticato}
\localtableofcontentswithrelativedepth{+1}

\begin{center}
	 \includegraphics[scale=1.25]{img/usecase/utenteautenticato.png}
\end{center}

\subsection{Logout \ref{RF:logout}}

\subsection{Gestione profilo e dati personali \ref{RF:profilehandling}}

\textbf{Riassunto:}
Questo use case descrive come un utente autenticato gestisce le proprie credenziali di accesso e preferenze personali tramite l’area profilo.

\textbf{Precondizioni:}
L’utente è autenticato nella piattaforma.

\textbf{Postcondizioni:}
Le modifiche alle credenziali o alle preferenze vengono salvate e risultano effettive per le successive sessioni di accesso.

\textbf{Descrizione:}
\begin{enumerate}
	\item L’utente accede alla sezione “Profilo”.
	\item Il sistema mostra i dati attuali: email, username, password mascherata e stato della preferenza notifiche.
	\item L’utente può:
	\begin{enumerate}
		\item modificare l’\textbf{email}, il sistema invia un messaggio di verifica al vecchio e al nuovo indirizzo email \textbf{[eccezione 1]};
		\item modificare l’\textbf{username};
		\item modificare la \textbf{password};
		\item aggiornare la preferenza di \textbf{ricezione notifiche}.
	\end{enumerate}
	\item Se le modifiche sono valide il sistema le salva. \textbf{[eccezione 2]}, \textbf{[eccezione 3]}.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
		\item[(1)] Se da parte dei due indirizzi email coinvolti il sistema non riceve da entrambi conferma della modifica, il processo di cambio email viene annullato.
	\item[(2)] Se l’email inserita non è valida o già associata a un altro account, il sistema notifica l’errore e annulla la modifica.
		\item[(3)] Se il nome utente inserito non è valido o già associato a un altro account, il sistema notifica l’errore e annulla la modifica.
\end{itemize}

\subsection{Visualizzazione proposte e sondaggi \ref{RF:visualizzazione}}

\textbf{Riassunto:}
Questo use case descrive come un utente autenticato consulta le proposte pubblicate e i sondaggi disponibili, applicando criteri di ordinamento e filtraggio.

\textbf{Precondizioni:}
L’utente è autenticato nella piattaforma e sono presenti proposte o sondaggi pubblicati.

\textbf{Postcondizioni:}
Le informazioni visualizzate sono aggiornate in base ai criteri di ordinamento o filtro selezionati.

\textbf{Descrizione:}
\begin{enumerate}
	\item L’utente accede alla sezione “Proposte e Sondaggi”.
	\item Il sistema mostra:
	\begin{enumerate}
		\item le \textbf{proposte} pubblicate, con titolo, autore, stato e categoria;
		\item i \textbf{sondaggi} attivi e chiusi con data di apertura e chiusura.
	\end{enumerate}
	\item L’utente può:
	\begin{enumerate}
		\item ordinare le proposte per rilevanza, numero di voti, data di pubblicazione o categoria;
		\item filtrare i risultati per categoria o stato della proposta;
		\item accedere al dettaglio di una proposta o di un sondaggio selezionato.
	\end{enumerate}
	\item Il sistema aggiorna dinamicamente l’elenco in base ai criteri scelti  \textbf{[eccezione 1]}.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
	\item[(1)] Se non sono presenti proposte o sondaggi attivi, il sistema mostra un messaggio informativo.
\end{itemize}

\subsection{Cambio di lingua \ref{RF:cambiolingua}}

\textbf{Riassunto:}
Questo use case descrive come un utente autenticato modifica la lingua dell’interfaccia della piattaforma.

\textbf{Precondizioni:}
L’utente è autenticato nella piattaforma.

\textbf{Postcondizioni:}
La lingua selezionata diventa attiva immediatamente e viene salvata nel profilo utente.

\textbf{Descrizione:}
\begin{enumerate}
	\item L’utente accede all’area “Impostazioni lingua” dal menu del profilo.
	\item Il sistema mostra l’elenco delle lingue disponibili.
	\item L’utente seleziona la lingua desiderata.
	\item Il sistema aggiorna l’interfaccia nella lingua scelta e registra la preferenza nel profilo utente.
\end{enumerate}

% ====================================================
% UC3
% ====================================================

\section{Amministratore}
\localtableofcontentswithrelativedepth{+1}

\begin{enumerate}
	\item Registrazione di moderatori e associazioni (\ref{RF:specialregistrazione})
	\item Pubblicazione sondaggi (\ref{RF:sondaggi})
	\item Visualizzare policy simulation (\ref{RF:visualizzazionesimulation})
	\item Download report sull’attività del sistema (\ref{RF:downloadreport})
	\item Gestione avanzamento stato proposta (\ref{RF:statoproposta})
\end{enumerate}

\begin{center}
	\includegraphics[scale=0.53]{img/usecase/Amministratore.png}
\end{center}

\subsection{Creare account moderatore o associazione/comitato \ref{RF:specialregistrazione}}
\textbf{Riassunto:}
Questo caso d’uso descrive la procedura di creazione di un nuovo account di tipo moderatore o associazione/comitato tramite l’interfaccia amministrativa.

\textbf{Precondizioni:}
L’amministratore è autenticato e ha i permessi di gestione utenti.

\textbf{Postcondizioni:}
L’account risulta creato, registrato e notificato via email.

\textbf{Descrizione:}
\begin{enumerate}
  \item L’amministratore accede alla sezione di gestione utenti.
  \item Seleziona il tipo di account da creare (moderatore o associazione/comitato).
  \item Inserisce i dati richiesti e conferma l’operazione.
  \item Il sistema verifica la correttezza e completezza dei dati inseriti.
  \item In caso di esito positivo, il sistema crea il nuovo account.
  \item Il sistema invia un’email di conferma e, se previsto, le credenziali di accesso.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
  \item [E1.] Dati mancanti o non validi: il sistema mostra un messaggio d’errore e richiede la correzione.
  \item [E2.] Indirizzo email già associato a un altro account: il sistema notifica il conflitto e annulla la creazione.
  \item [E3.] Errore nell’invio dell’email: il sistema registra l’errore e notifica l’amministratore.
\end{itemize}

\subsection{Pubblicare sondaggi \ref{RF:sondaggi}}
\textbf{Riassunto:}
Questo caso d’uso descrive la pubblicazione di un nuovo sondaggio o consultazione pubblica da parte dell’amministratore.

\textbf{Precondizioni:}
L’amministratore è autenticato e dispone dei permessi di gestione sondaggi.

\textbf{Postcondizioni:}
Il sondaggio è pubblicato e reso visibile ai cittadini.

\textbf{Descrizione:}
\begin{enumerate}
  \item L’amministratore accede al modulo di gestione sondaggi.
  \item Seleziona “Crea nuovo sondaggio”.
  \item Compila titolo, descrizione, periodo di apertura e categorie tematiche.
  \item Conferma la pubblicazione.
  \item Il sistema pubblica il sondaggio e invia notifiche ai cittadini iscritti.
  \item L’amministratore può successivamente modificare o annullare la pubblicazione.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
  \item [E1.] Campi obbligatori mancanti: il sistema richiede di completare i dati.
  \item [E2.] Periodo di validità non coerente (data fine antecedente all’inizio): il sistema segnala l’errore.
  \item [E3.] Errore durante l’invio delle notifiche: il sistema completa la pubblicazione ma registra l’errore di comunicazione.
\end{itemize}

\subsection{Interazione con dashboard amministrativa \ref{sec:dashboard}}
\textbf{Riassunto:}
Questo caso d’uso descrive l’utilizzo della dashboard amministrativa per consultare, filtrare ed esportare i dati aggregati del sistema.

\textbf{Precondizioni:}
L’amministratore è autenticato.

\textbf{Postcondizioni:}
I dati sono visualizzati, filtrati o esportati secondo le operazioni eseguite.

\textbf{Descrizione:}
\begin{enumerate}
  \item L’amministratore accede alla dashboard amministrativa.
  \item Visualizza gli indicatori principali (attività utenti, voti, proposte per categoria).
  \item Applica filtri e ordinamenti sui dati visualizzati.
  \item Esporta i dati in formato CSV o PDF.
  \item Può configurare la dashboard per personalizzare i widget o i parametri mostrati.
\end{enumerate}

\textbf{Eccezioni:}
\begin{itemize}
  \item [E1.] Nessun dato disponibile per i criteri selezionati: il sistema mostra un messaggio “Nessun risultato trovato”.
  \item [E2.] Errore di esportazione (ad es. permessi insufficienti o formato non supportato): il sistema notifica l’errore e annulla l’operazione.
  \item [E3.] Errore nel caricamento dei dati (timeout o perdita connessione): il sistema mostra un messaggio di errore e consente di riprovare.
\end{itemize}

\subsection{Approvare/rifiutare una proposta}

\textbf{Riassunto:}
Questo caso d’uso descrive come l’amministratore esamina una proposta in stato \textit{in valutazione} e decide se approvarla oppure rifiutarla, aggiornandone lo stato.

\textbf{Precondizioni:}
Esistono proposte in stato \textit{in valutazione}.

\textbf{Postcondizioni:}
La proposta risulta \textit{accettata} oppure \textit{rifiutata}.
La transizione di stato è registrata nello storico.

\textbf{Descrizione:}
\begin{enumerate}
  \item L’amministratore accede all’elenco delle proposte in valutazione.
  \item Seleziona una proposta e ne visualizza contenuto, metadati e storico modifiche.
  \item Analizza revisioni, contributi e sostegni ricevuti.
  \item Decide se approvare la proposta oppure rifiutarla inserendo una motivazione.
  \item Il sistema aggiorna lo stato e registra l’esito della valutazione.
\end{enumerate}

\textbf{Eccezioni:}
\begin{enumerate}
  \item La proposta è stata modificata durante la valutazione: il sistema richiede conferma dell’azione.
  \item La proposta risulta già valutata da un altro amministratore: il sistema impedisce l’operazione.
\end{enumerate}

\subsection{Pubblicare e aggiornare un report amministrativo}

\textbf{Riassunto:}
Questo caso d’uso descrive come l’amministratore genera, pubblica e, se necessario, aggiorna un report relativo a una proposta. La pubblicazione può comportare un aggiornamento dello stato della proposta.

\textbf{Precondizioni:}
Esistono proposte che richiedono la redazione o l’aggiornamento di un report.

\textbf{Postcondizioni:}
Il report risulta pubblicato o aggiornato.
Lo stato della proposta può essere aggiornato.

\textbf{Descrizione:}
\begin{enumerate}
  \item L’amministratore accede al modulo di report.
  \item Inserisce o modifica i contenuti del report (testo, indicatori, allegati).
  \item Pubblica il report.
  \item Il sistema aggiorna lo stato della proposta, se applicabile.
\end{enumerate}

\textbf{Eccezioni:}
\begin{enumerate}
  \item Il report è in modifica da parte di un altro amministratore: l’operazione viene bloccata.
\end{enumerate}

\section{Cittadino}
\localtableofcontentswithrelativedepth{+1}

\begin{center}
  \includegraphics[scale=0.65]{img/usecase/Cittadino 1.png}
  \includegraphics[scale=0.65]{img/usecase/Cittadino 2.png}
\end{center}

\subsection{Creazione proposta \ref{RF:creazioneproposta}}

\textbf{Riassunto:} Questo use case descrive come un cittadino autenticato crea una nuova proposta.

\begin{description}
  \item[Postcondizioni:]~
  \begin{itemize}
    \item Una nuova proposta è creata con lo stato ``pubblicata'' o ``bozza''.
    \item Tutti i dati inseriti e i metadati obbligatori (autore, data/ora di creazione, categoria, campi categoria) sono salvati nel sistema.
  \end{itemize}

  \item[Descrizione:]~
  \begin{enumerate}
    \item Il cittadino accede alla sezione ``Crea proposta''.
    \item Il sistema mostra il modulo di creazione con i campi previsti per la categoria selezionata:
    \begin{itemize}
      \item Titolo
      \item Descrizione
      \item Luogo (selezionabile tramite indirizzo o mappa)
      \item Categoria
    \end{itemize}
    \item Il cittadino compila i campi obbligatori e, se disponibili, eventuali campi facoltativi.
    \item Il cittadino sceglie se pubblicare la proposta o salvarla come bozza:
    \begin{itemize}
      \item Se decide di pubblicarla:
      \begin{enumerate}
        \item Il sistema valida i dati inseriti [eccezione 1].
        \item Se la validazione ha esito positivo, il sistema:
        \begin{itemize}
          \item associa la proposta all’utente come autore;
          \item registra data/ora di creazione e la categoria selezionata;
          \item conferma l’avvenuta pubblicazione all’utente [eccezione 2].
        \end{itemize}
      \end{enumerate}

      \item Se invece la salva come bozza, alla sua selezione nella lista delle proposte verrà riportato al modulo di creazione, dove avrà la possibilità di modificarla e/o pubblicarla [eccezione 2].
    \end{itemize}
  \end{enumerate}

  \item[Eccezioni:]~
  \begin{enumerate}
    \item Se uno o più campi sono mancanti o non validi, il sistema segnala gli errori e richiede la correzione dei dati.
    \item In caso di errore di sistema (es. problemi di salvataggio sul database), il sistema notifica un messaggio di errore e la proposta non viene creata o viene richiesto un nuovo tentativo.
  \end{enumerate}
\end{description}

\subsection{Modificare proposta \ref{RF:modifica}}
\begin{description}
  \item[Riassunto:] Questo use case descrive come un cittadino autenticato modifica una proposta esistente, sia come autore della proposta, sia proponendo una modifica a una proposta creata da altri utenti.

  \item[Precondizioni:]~
  \begin{itemize}
    \item Esiste almeno una proposta in stato “pubblicata”.
  \end{itemize}

  \item[Postcondizioni:]~
  \begin{itemize}
    \item Se il cittadino modifica una propria proposta:
    \begin{itemize}
      \item È creata una nuova versione della proposta come versione principale.
      \item La versione precedente rimane consultabile nello storico, con autore, data/ora, descrizione e differenze registrate.
    \end{itemize}
    \item Se il cittadino propone una modifica alla proposta di un altro utente:
    \begin{itemize}
      \item È creata una proposta di modifica associata alla proposta originale, in stato di revisione non pubblica.
      \item L’autore della proposta originale viene notificato della nuova proposta di modifica e potrà successivamente accettarla o rifiutarla.
    \end{itemize}
  \end{itemize}

  \item[Descrizione:]~
  \begin{enumerate}
    \item Il cittadino accede alla alla lista di proposte pubblicate.
    \item Il cittadino seleziona una proposta in stato “pubblicata” e accede alla pagina di dettaglio.
    \item Il cittadino seleziona il comando “Modifica”.
    \item Il sistema mostra un modulo di modifica precompilato con i dati correnti della proposta.
    \item Il cittadino modifica uno o più campi del modulo.
    \item Il cittadino compila il campo “descrizione” della modifica.
    \item Il cittadino conferma il salvataggio della modifica.
    \item Il sistema verifica la validità dei dati inseriti [eccezione 1].
    \item Il sistema verifica se il cittadino è l’autore della proposta:
    \begin{itemize}
      \item Se il cittadino è l'autore della proposta:
      \begin{enumerate}
        \item crea una nuova versione della proposta registrando autore della modifica, data/ora, descrizione e differenze rispetto alla versione precedente.
        \item imposta la nuova versione come versione principale visibile al pubblico.
        \item aggiorna lo storico delle versioni e conferma al cittadino l’avvenuto salvataggio della modifica [eccezione 3].
      \end{enumerate}

      \item Se il cittadino non è l'autore della proposta:
      \begin{enumerate}
        \item registra la proposta di modifica associandola alla proposta originale e al cittadino proponente, in stato di revisione.
        \item notifica l’autore della proposta originale della presenza di una nuova proposta di modifica.
        \item conferma al cittadino proponente l’avvenuto invio della proposta di modifica [eccezione 3].
        \item In un momento successivo, l’autore della proposta originale potrà accettare o rifiutare la proposta di modifica ricevuta; l’esito è tracciato e, in caso di accettazione, viene creata una nuova versione della proposta principale secondo le regole di versionamento.
      \end{enumerate}
    \end{itemize}
  \end{enumerate}

  \item[Eccezioni:]~
  \begin{enumerate}
    \item Dati mancanti o non validi: se uno o più campi obbligatori del modulo (compresi quelli specifici di categoria) non sono compilati correttamente, o la descrizione della modifica (nel caso B) è assente, il sistema evidenzia gli errori e non procede al salvataggio.

    \item Proposta non modificabile: se la proposta non è più in stato pubblicata (ad es. è passata a in valutazione, accettata, rifiutata, in attuazione o completata), il sistema disabilita l’azione di modifica e informa il cittadino che la proposta non è modificabile.

    \item Errore di sistema o conflitto di versione: in caso di errore tecnico durante il salvataggio, o se nel frattempo la proposta è stata aggiornata da un altro utente, il sistema annulla l’operazione corrente, notifica il problema e richiede al cittadino di ripetere l’operazione a partire dalla versione aggiornata.
  \end{enumerate}
\end{description}

\subsection{Eliminazione proposta \ref{RF:eliminaproposta}}

\begin{description}
  \item[Riassunto:] Questo use case descrive come un cittadino autore di una proposta pubblicata procede alla sua eliminazione.

  \item[Precondizioni:]~
  \begin{itemize}
    \item Esiste almeno una proposta in stato pubblicata di cui il cittadino è autore.
  \end{itemize}

  \item[Postcondizioni:]~
  \begin{itemize}
    \item Tutti i dati pubblicati relativi alla proposta sono rimossi dalla pubblicazione.
    \item La proposta rimane tracciata nell’elenco personale dell’autore con uno stato che ne indica l’eliminazione.
  \end{itemize}

  \item[Descrizione:]~
  \begin{enumerate}
    \item Il cittadino accede alla sezione delle proprie proposte.
    \item Il cittadino seleziona una proposta in stato pubblicata che desidera eliminare.
    \item Il cittadino seleziona il comando “Elimina proposta” associato alla proposta.
    \item Il sistema mostra un messaggio di conferma che riassume gli effetti dell’operazione e richiede una conferma esplicita [eccezione 1].
    \item Il cittadino conferma l’eliminazione.
    \item Il sistema:
    \begin{itemize}
      \item aggiorna lo stato della proposta per indicarne l’eliminazione [eccezione 2];
      \item mostra un messaggio di conferma dell’avvenuta eliminazione al cittadino.
    \end{itemize}
  \end{enumerate}

  \item[Eccezioni:]~
  \begin{enumerate}
    \item L’utente annulla la conferma di eliminazione: il sistema chiude la finestra di conferma, non applica alcuna modifica allo stato della proposta e la proposta rimane pubblicata.
    \item La proposta non è più nello stato “pubblicata” al momento della conferma: il sistema annulla l’operazione, non effettua l’eliminazione e informa il cittadino che la proposta non è più eliminabile.
    \item Errore tecnico durante l’aggiornamento dei dati: il sistema segnala un messaggio di errore e lascia invariato lo stato della proposta.
  \end{enumerate}
\end{description}

\subsection{Espressione del voto (proposta) \ref{RF:voto}}

\textbf{Riassunto:} Questo use case descrive come un cittadino eleggibile esprime un voto positivo o negativo su una proposta.

\begin{description}
  \item[Precondizioni:]~
  \begin{itemize}
    \item La proposta su cui si intende votare è in uno stato che consente la votazione (es. pubblicata, in valutazione, non ancora accettata o rifiutata).
  \end{itemize}

  \item[Postcondizioni:]~
  \begin{itemize}
    \item Il voto del cittadino è registrato in forma anonima.
    \item Il conteggio dei voti e/o il punteggio della proposta è aggiornato secondo le regole di calcolo previste.
    \item L’utente può, se consentito, modificare il proprio voto fino alla chiusura della votazione.
  \end{itemize}

  \item[Descrizione:]~
  \begin{enumerate}
    \item Il cittadino accede al dettaglio di una proposta su cui è possibile votare.
    \item Il sistema mostra lo stato corrente della proposta e le opzioni di voto (es. ``Voto favorevole'', ``Voto contrario''), nonché l’eventuale voto già espresso dall’utente.
    \item Il cittadino seleziona l’opzione di voto desiderata.
    \item Se i controlli hanno esito positivo, il sistema:
    \begin{itemize}
      \item registra il voto in forma anonima;
      \item aggiorna il conteggio totale e, se previsto, gli altri indicatori associati;
      \item conferma l’avvenuta registrazione del voto all’utente [eccezione 1].
    \end{itemize}
  \end{enumerate}

  \item[Eccezioni:]~
  \begin{enumerate}
    \item Se la proposta si trova in uno stato che non consente più la votazione (es. accettata, rifiutata, chiusa), il sistema disabilita l’azione di voto e notifica che la votazione non è più disponibile.
    \item In caso di errore tecnico durante la registrazione del voto, il sistema segnala l’errore e il voto non viene considerato valido fino a nuovo tentativo dell’utente.
  \end{enumerate}
\end{description}

\subsection{Gestione dei preferiti \ref{RF:preferiti}}

\textbf{Riassunto:} Questo use case descrive come un cittadino gestisce l’elenco dei propri elementi preferiti (proposte e sondaggi).

\begin{description}
  \item[Precondizioni:]~
  \begin{itemize}
    \item Sono presenti proposte o sondaggi visualizzabili.
  \end{itemize}

  \item[Postcondizioni:]~
  \begin{itemize}
    \item L’elenco dei preferiti del cittadino è aggiornato in base alle azioni di aggiunta/rimozione.
    \item Le eventuali notifiche collegate agli elementi preferiti sono aggiornate \ref{RF:notifichepreferiti}.
  \end{itemize}

  \item[Descrizione:]~
  \begin{enumerate}
    \item Il cittadino accede alla lista delle proposte e/o dei sondaggi, oppure al dettaglio di un singolo elemento.
    \item Per ogni proposta/sondaggio il sistema mostra lo stato di preferito con l'icona di una stella che, se colorata, indica l'aggiunta ai preferiti.
    \item L'utente può cliccare sulla stella per modificarne lo stato.
    \item Il sistema aggiorna l’elenco dei preferiti dell’utente e conferma l’operazione [eccezione 1].
    \item Il cittadino può accedere alla sezione ``Preferiti'' per visualizzare l’elenco aggiornato delle proposte e dei sondaggi contrassegnati.
  \end{enumerate}

  \item[Eccezioni:]~
  \begin{enumerate}
    \item Se l’elemento selezionato non è più disponibile (es. rimosso, oscurato, archiviato), il sistema informa l’utente che l’operazione non può essere completata e, se necessario, lo rimuove automaticamente dall’elenco dei preferiti.
    \item In caso di errore tecnico nella registrazione dell’operazione, il sistema segnala l’errore e l’elenco dei preferiti rimane invariato.
  \end{enumerate}
\end{description}

\subsection{Segnalare un contenuto \ref{RF:segnalazione}}

\textbf{Riassunto:}
Questo caso d’uso descrive come un cittadino segnala un contenuto pubblicato (proposta o modifica) ritenuto inappropriato, inserendolo nella coda di revisione dei moderatori in conformità al requisito RF5.1.

\textbf{Precondizioni:}
\begin{itemize}
  \item L'utente visualizzando un contenuto pubblicato (proposta o modifica).
\end{itemize}

\textbf{Postcondizioni:}
\begin{itemize}
  \item È stata registrata una segnalazione associata al contenuto e al cittadino.
  \item Il contenuto risulta presente nella coda di revisione dei moderatori.
\end{itemize}

\textbf{Descrizione:}
\begin{enumerate}
  \item Il cittadino visualizza una proposta o una modifica pubblicata che ritiene inappropriata.
  \item Il cittadino seleziona il comando \textit{``Segnala contenuto''} associato al contenuto.
  \item Il sistema mostra un modulo di segnalazione che include:
  \begin{enumerate}
    \item identificativo e anteprima del contenuto;
    \item un elenco di motivazioni predefinite, ad esempio:
    \begin{enumerate}
      \item incitamento all’odio;
      \item contenuti offensivi o volgari;
      \item informazioni false;
      \item spam;
      \item contenuto duplicato;
      \item violazione della privacy;
      \item altro.
    \end{enumerate}
    \item un campo di testo libero per una descrizione opzionale del problema.
  \end{enumerate}
  \item Il cittadino seleziona una motivazione dall’elenco.
  \item \textit{Facoltativamente}, il cittadino inserisce una descrizione aggiuntiva nel campo di testo.
  \item Il cittadino conferma l’invio della segnalazione.
  \item Il sistema verifica che sia stata selezionata almeno una motivazione e che i campi obbligatori siano compilati correttamente [eccezione 1].
  \item Il sistema verifica che il contenuto sia ancora disponibile e non sia già stato rimosso [eccezione 2].
  \item In caso di esito positivo dei controlli, il sistema:
  \begin{enumerate}
    \item registra la segnalazione associandola al contenuto e al cittadino;
    \item inserisce il contenuto nella coda di revisione dei moderatori;
    \item mostra un messaggio di conferma al cittadino sull’avvenuta registrazione della segnalazione.
  \end{enumerate}
\end{enumerate}

\textbf{Eccezioni:}
\begin{enumerate}
  \item Campi obbligatori mancanti o non validi (ad esempio nessuna motivazione selezionata): il sistema evidenzia i campi da correggere e non conferma l’invio della segnalazione.
  \item Contenuto non più disponibile (ad esempio rimosso da un moderatore o dall’autore): il sistema annulla la procedura e informa il cittadino che il contenuto non è più accessibile.
\end{enumerate}

\section{Associazione/Comitato}

\subsection{Pubblicazione proposte collettive (\ref{RF:propostecollettive})}
\subsection{Endorsement (\ref{RF:endorsement})}

\section{Moderatore}
\localtableofcontentswithrelativedepth{+1}

\begin{center}
	\includegraphics[scale=0.9]{img/usecase/Moderatore.png}
\end{center}

\subsection{Interazione coda di revisione} \ref{RF:codarevisione}
\subsection{Rimozione contenuti} \ref{RF:rimozionecontenuti}
\subsection{Moderazione sugli utenti} \ref{RF:moderazioneutenti}